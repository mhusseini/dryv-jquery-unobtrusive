!function(a){if("object"==typeof module&&"object"==typeof module.exports){var t=a(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","jquery"],a)}(function(a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=a("jquery");!function(){var c=function(a){switch(a.attr("type").toLowerCase()){case"checkbox":case"radio":return a[0].checked;default:return function(a,t){switch(t){case"number":return Number(a);case"boolean":a.toLowerCase();default:return a}}(a.val(),a.attr("data-val-dryv-type"))}},o=function(a,t){var r=y(a);if(!r.data("dryv-ignore")){var e=r.attr("name");if(e)for(var n=e.replace(/^\w|\.\w/g,function(a){return a.toLowerCase()}).split("."),i=n.length-1,d=0;d<n.length;d++){var o=n[d],s=/(\w+)(\[(\d)\])?/.exec(o),v=s[1],u=s[3],l=t;if(t=t[v],d<i){if(t||(t=u?[]:{},l[v]=t),u){var f=Number(u);t=t[f]?t[f]:t[f]={}}}else u?(t||(t=l[v]=[]),t[Number(u)]=c(r)):l[v]=c(r)}}},s=function(a){var t,r,e,n=(t=a.data("dryv-object"))||(e={},y("input, select, textarea",r=a).each(function(a,t){return o(t,e)}),r.data("dryv-object",e),e);return n.isNew=!t,n};y.validator.addMethod("dryv",function(a,t,r){var e=window.dryv[r];if(!e)throw"Cannot find Dryv validation function '"+r+"'.";var n=s(y(this.currentForm));n.isNew||o(t,n);var i=y(t),d=e(n);if(d){if(i.data("msgDryv",d.message||d),"warning"===d.type){if(i.data("dryvWarning")===d.message)return i.data("dryvWarningCanIgnore",!0),!0;i.data("dryvWarning",d.message)}return i.data("dryvWarningCanIgnore",null),!1}return i.data("dryvWarningCanIgnore",null),i.data("dryvWarning",null),i.data("msgDryv",null),!0}),y.validator.unobtrusive.adapters.add("dryv",function(a){var t=a.form,r=y(t);r.data("dryv-init")||(r.data("dryv-init",!0),r.bind("submit",function(){y(this).data("dryv-object",null)}),y("input:not([data-val-dryv]), textarea:not([data-val-dryv]), select:not([data-val-dryv]), datalist:not([data-val-dryv]), button:not([data-val-dryv])",r).each(function(a,t){"hidden"===t.type&&y("input[type=checkbox][name='"+t.name+"']",r).length?y(t).data("dryv-ignore",!0):y(t).change(function(){var a=s(r);o(this,a)})})),a.rules.dryv=a.message});var l="field-validation-warning";y.validator.setDefaults({highlight:function(a,t,r){y(a.form).find("*[data-valmsg-for="+a.id+"]").addClass(y(a).data("dryvWarning")?l:t).removeClass(r)},unhighlight:function(a,t,r){y(a.form).find("*[data-valmsg-for="+a.id+"]").removeClass(t).removeClass(l)}});var a=y.validator.prototype,f=a.defaultShowErrors;a.defaultShowErrors=function(){for(var a=y(this.currentForm),t=[],r=[],e=0,n=this.successList;e<n.length;e++){var i=n[e],d=y(i),o=d.data("dryvWarning");if(o){var s={message:o,element:i};this.errorList.push(s),d.data("dryvWarningCanIgnore")&&r.push(s),a.find("*[data-valmsg-for="+i.id+"]").addClass(l).removeClass(this.settings.validClass)}else t.push(i)}this.successList=t,f.call(this);for(var v=0,u=r;v<u.length;v++){s=u[v];this.errorList.splice(this.errorList.indexOf(s),1)}}}()});