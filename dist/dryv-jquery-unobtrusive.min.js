!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","jquery"],e)}(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery");!function(){var convert=function(e,t){switch(t){case"number":return Number(e);case"boolean":e.toLowerCase();default:return e}},getValue=function(e){switch(e.attr("type").toLowerCase()){case"checkbox":case"radio":return e[0].checked;default:return convert(e.val(),e.attr("data-type-dryv"))}},updateField=function(e,t){var r=$(e);if(!r.data("dryv-ignore"))for(var a=r.attr("name").replace(/^\w|\.\w/g,function(e){return e.toLowerCase()}).split("."),o=a.length-1,n=0;n<a.length;n++){var i=a[n],d=/(\w+)(\[(\d)\])?/.exec(i),u=d[1],c=d[3],s=t;if(t=t[u],n<o){if(t||(t=c?[]:{},s[u]=t),c){var v=Number(c);t=t[v]?t[v]:t[v]={}}}else c?(t||(t=s[u]=[]),t[Number(c)]=getValue(r)):s[u]=getValue(r)}},createObject=function(e){var r={};return $("input, select, textarea",e).each(function(e,t){return updateField(t,r)}),e.data("dryv-object",r),r},getObject=function(e){var t,r=(t=e.data("dryv-object"))||createObject(e);return r.isNew=!t,r};$.validator.addMethod("dryv",function(e,t,r){var a=getObject($(this.currentForm));a.isNew||updateField(t,a);var o=$(t);o.data("msgDryv",null);for(var n=0,i=r;n<i.length;n++){var d=(0,i[n])(a);if(d)return o.data("msgDryv",d.message||d),!1}return!0}),$.validator.unobtrusive.adapters.add("dryv",function(options){var form=options.form,$form=$(form);$form.data("dryv-init")||($form.data("dryv-init",!0),$form.bind("submit",function(){$(this).data("dryv-object",null)}),$("input:not([data-val-dryv]), textarea:not([data-val-dryv])",$form).each(function(e,t){"hidden"===t.type&&$("input[type=checkbox][name='"+t.name+"']",$form).length?$(t).data("dryv-ignore",!0):$(t).change(function(){var e=getObject($form);updateField(this,e)})}));try{options.rules.dryv=eval(options.message)}catch(e){console.error("Failed to parse Dryv validation: "+e+".\nThe expression that was parsed is:\n"+options.message)}})}()});