!function(e){if("object"==typeof module&&"object"==typeof module.exports){var r=e(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","jquery"],e)}(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery");!function(){var regex=/(\w+)(\[(\d)\])?/,createFormHandler=function(e){var r=function(){return e.data("dryv-object",null)};e.data("dryv-handler",r).on("invalid-form",r)},updateField=function(e,r){for(var t=$(e),a=t.attr("name").replace(/^\w|\.\w/,function(e){return e.toUpperCase()}).split("."),n=a.length-1,o=0;o<a.length;o++){var i=a[o],d=regex.exec(i),u=d[1],s=d[3],c=r;if(r=r[u],o<n){if(r||(r=s?[]:{},c[u]=r),s){var v=Number(s);r=r[v]?r[v]:r[v]={}}}else s?(r||(r=c[u]=[]),r[Number(s)]=t.val()):c[u]=t.val()}},createObject=function(e){var r=$(e.currentForm);r.data("dryv-handler")||createFormHandler(r);var t={};return $("input, select, textarea",r).each(function(e,r){return updateField(r,t)}),r.data("dryv-object",t),t},getObject=function(e){var r,t=(r=$(e.currentForm).data("dryv-object"))||createObject(e);return t.isNew=!r,t};$.validator.addMethod("dryv",function(e,r,t){var a=getObject(this);a.isNew||updateField(r,a);var n=$(r);n.data("msgDryv",null);for(var o=0,i=t;o<i.length;o++){var d=(0,i[o])(a);if(d)return n.data("msgDryv",d.message||d),!1}return!0}),$.validator.unobtrusive.adapters.add("dryv",function(options){try{options.rules.dryv=eval(options.message)}catch(e){console.error("Failed to parse Dryv validation: "+e+".\nThe expression that was parsed is:\n"+options.message)}})}()});