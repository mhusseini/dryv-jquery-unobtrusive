!function(){var f=function(a){switch(a.attr("type").toLowerCase()){case"checkbox":case"radio":return a[0].checked;default:return function(a,r){switch(r){case"number":return Number(a);case"boolean":a.toLowerCase();default:return a}}(a.val(),a.attr("data-val-dryv-type"))}},s=function(a,r){var t=$(a);if(!t.data("dryv-ignore")){var n=t.attr("name");if(n)for(var e=n.replace(/^\w|\.\w/g,function(a){return a.toLowerCase()}).split("."),i=e.length-1,d=0;d<e.length;d++){var s=e[d],o=/(\w+)(\[(\d)\])?/.exec(s),v=o[1],l=o[3],u=r;if(r=r[v],d<i){if(r||(r=l?[]:{},u[v]=r),l){var c=Number(l);r=r[c]?r[c]:r[c]={}}}else l?(r||(r=u[v]=[]),r[Number(l)]=f(t)):u[v]=f(t)}}},o=function(a){var r,t,n,e=(r=a.data("dryv-object"))||(t=a,n={},$("input, select, textarea",t).each(function(a,r){return s(r,n)}),t.data("dryv-object",n),n);return e.isNew=!r,e};$.validator.addMethod("dryv",function(a,r,t){var n=window.dryv[t];if(!n)throw"Cannot find Dryv validation function '"+t+"'.";var e=o($(this.currentForm));e.isNew||s(r,e);var i=$(r),d=n(e);if(d){if(i.data("msgDryv",d.message||d),"warning"===d.type){if(i.data("dryvWarning")===d.message)return i.data("dryvWarningCanIgnore",!0),!0;i.data("dryvWarning",d.message)}return i.data("dryvWarningCanIgnore",null),!1}return i.data("dryvWarningCanIgnore",null),i.data("dryvWarning",null),i.data("msgDryv",null),!0}),$.validator.unobtrusive.adapters.add("dryv",function(a){var r=a.form,t=$(r);t.data("dryv-init")||(t.data("dryv-init",!0),t.bind("submit",function(){$(this).data("dryv-object",null)}),$("input:not([data-val-dryv]), textarea:not([data-val-dryv]), select:not([data-val-dryv]), datalist:not([data-val-dryv]), button:not([data-val-dryv])",t).each(function(a,r){"hidden"===r.type&&$("input[type=checkbox][name='"+r.name+"']",t).length?$(r).data("dryv-ignore",!0):$(r).change(function(){var a=o(t);s(this,a)})})),a.rules.dryv=a.message});var u="field-validation-warning";$.validator.setDefaults({highlight:function(a,r,t){$(a.form).find("*[data-valmsg-for="+a.id+"]").addClass($(a).data("dryvWarning")?u:r).removeClass(t)},unhighlight:function(a,r,t){$(a.form).find("*[data-valmsg-for="+a.id+"]").removeClass(r).removeClass(u)}});var a=$.validator.prototype,c=a.defaultShowErrors;a.defaultShowErrors=function(){for(var a=$(this.currentForm),r=[],t=[],n=0,e=this.successList;n<e.length;n++){var i=e[n],d=$(i),s=d.data("dryvWarning");if(s){var o={message:s,element:i};this.errorList.push(o),d.data("dryvWarningCanIgnore")&&t.push(o),a.find("*[data-valmsg-for="+i.id+"]").addClass(u).removeClass(this.settings.validClass)}else r.push(i)}this.successList=r,c.call(this);for(var v=0,l=t;v<l.length;v++){o=l[v];this.errorList.splice(this.errorList.indexOf(o),1)}}}();