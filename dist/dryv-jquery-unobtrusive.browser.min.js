!function(){var c=function(a){switch(a.attr("type").toLowerCase()){case"checkbox":case"radio":return a[0].checked;default:return function(a,t){switch(t){case"number":return Number(a);case"boolean":a.toLowerCase();default:return a}}(a.val(),a.attr("data-val-dryv-type"))}},d=function(a,t){var r=$(a);if(!r.data("dryv-ignore")){var n=r.attr("name");if(n)for(var e=n.replace(/^\w|\.\w/g,function(a){return a.toLowerCase()}).split("."),i=e.length-1,s=0;s<e.length;s++){var d=e[s],o=/(\w+)(\[(\d)\])?/.exec(d),v=o[1],l=o[3],u=t;if(t=t[v],s<i){if(t||(t=l?[]:{},u[v]=t),l){var g=Number(l);t=t[g]?t[g]:t[g]={}}}else l?(t||(t=u[v]=[]),t[Number(l)]=c(r)):u[v]=c(r)}}},o=function(a){var t,r,n,e=(t=a.data("dryv-object"))||(r=a,n={},$("input, select, textarea",r).each(function(a,t){return d(t,n)}),r.data("dryv-object",n),n);return e.isNew=!t,e};$.validator.addMethod("dryv",function(a,t,r){var n=window.dryv[r];if(!n)throw"Cannot find Dryv validation function '"+r+"'.";var e=o($(this.currentForm));e.isNew||d(t,e);var i=$(t),s=n(e);if(s){if(i.data("msgDryv",s.message||s),"warning"===s.type){if(i.data("dryvWarning")===s.message)return i.data("dryvWarningCanIgnore",!0),!0;i.data("dryvWarning",s.message)}return i.data("dryvWarningCanIgnore",null),!1}return i.data("dryvWarningCanIgnore",null),i.data("dryvWarning",null),i.data("msgDryv",null),!0}),$.validator.unobtrusive.adapters.add("dryv",function(a){var t=a.form,r=$(t);r.data("dryv-init")||(r.data("dryv-init",!0),r.bind("submit",function(){$(this).data("dryv-object",null)}),$("input:not([data-val-dryv]), textarea:not([data-val-dryv]), select:not([data-val-dryv]), datalist:not([data-val-dryv]), button:not([data-val-dryv])",r).each(function(a,t){"hidden"===t.type&&$("input[type=checkbox][name='"+t.name+"']",r).length?$(t).data("dryv-ignore",!0):$(t).change(function(){var a=o(r);d(this,a)})})),a.rules.dryv=a.message}),$.validator.setDefaults({highlight:function(a,t,r){$(a.form).find("*[data-valmsg-for="+a.id+"]").addClass($(a).data("dryvWarning")?this.settings.warningClass:t).removeClass(r)},unhighlight:function(a,t,r){$(a.form).find("*[data-valmsg-for="+a.id+"]").removeClass(t).removeClass(this.settings.warningClass)}});var a=$.validator.prototype,u=a.defaultShowErrors;a.defaultShowErrors=function(){this.settings.warningClass||(this.settings.warningClass="field-validation-warning");for(var a=$(this.currentForm),t=[],r=[],n=0,e=this.successList;n<e.length;n++){var i=e[n],s=$(i),d=s.data("dryvWarning");if(d){var o={message:d,element:i};this.errorList.push(o),s.data("dryvWarningCanIgnore")&&r.push(o),a.find("*[data-valmsg-for="+i.id+"]").addClass(this.settings.warningClass).removeClass(this.settings.validClass)}else t.push(i)}this.successList=t,u.call(this);for(var v=0,l=r;v<l.length;v++){o=l[v];this.errorList.splice(this.errorList.indexOf(o),1)}}}();