!function(){var regex=/(\w+)(\[(\d)\])?/,createFormHandler=function(e){var r=function(){return e.data("dryv-object",null)};e.data("dryv-handler",r).on("invalid-form",r)},updateField=function(e,r){for(var t=$(e),a=t.attr("name").replace(/^\w|\.\w/,function(e){return e.toUpperCase()}).split("."),n=a.length-1,o=0;o<a.length;o++){var d=a[o],i=regex.exec(d),v=i[1],c=i[3],u=r;if(r=r[v],o<n){if(r||(r=c?[]:{},u[v]=r),c){var s=Number(c);r=r[s]?r[s]:r[s]={}}}else c?(r||(r=u[v]=[]),r[Number(c)]=t.val()):u[v]=t.val()}},createObject=function(e){var r=$(e.currentForm);r.data("dryv-handler")||createFormHandler(r);var t={};return $("input, select, textarea",r).each(function(e,r){return updateField(r,t)}),r.data("dryv-object",t),t},getObject=function(e){var r,t=(r=$(e.currentForm).data("dryv-object"))||createObject(e);return t.isNew=!r,t};$.validator.addMethod("dryv",function(e,r,t){var a=getObject(this);a.isNew||updateField(r,a);var n=$(r);n.data("msgDryv",null);for(var o=0,d=t;o<d.length;o++){var i=(0,d[o])(a);if(i)return n.data("msgDryv",i.message||i),!1}return!0}),$.validator.unobtrusive.adapters.add("dryv",function(options){try{options.rules.dryv=eval(options.message)}catch(e){console.error("Failed to parse Dryv validation: "+e+".\nThe expression that was parsed is:\n"+options.message)}})}();